<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CloudBoundPCs Store</title>
  <link rel="stylesheet" href="/styles.css" />
</head>

<body>

  
  <header class="navbar">
    <img src="/images/Logo.png" alt="CloudBoundPCs Logo" class="logo">

    <div class="menu-wrapper">
      <div class="burger" onclick="toggleMenu()">
        <span></span><span></span><span></span>
      </div>

      <nav id="navMenu" class="nav-menu">
        <a href="#desktops">Desktops</a>
        <a href="#parts">Graphic Cards</a>
        <a href="/cpu.html">CPUs</a>
      </nav>
    </div>

    <input type="text" id="search-bar" placeholder="Search products..." />

<button id="cart-toggle" class="cart-link" onclick="toggleMiniCart()" aria-label="Cart">
  <span class="cart-icon" aria-hidden="true">ðŸ›’</span>
  <span class="cart-text">Cart</span>
  <span id="cart-count" class="cart-badge">0</span>
</button>

  </header>

  
  <div class="slider">
    <div class="slider-text">
      <span class="tagline">Limited Time</span>
      <h2>Build Your Dream PC</h2>
      <p>Premium desktops and parts built for performance, speed, and reliability.</p>
      <button class="cta-btn">Shop Deals</button>
    </div>

    <div class="slider-images">
      <img src="/Images/bundle1.jpg" class="active" alt="Bundle 1">
      <img src="/Images/bundle2.jpg" alt="Bundle 2">
    </div>
  </div>


  <section id="top-picks">
    <h2 class="section-title">Top Picks</h2>

    <div class="listing">
      <div class="item">
        <img src="/Images/9800.jpg" alt="9800">
        <h3>AMD Ryzen 7 9800X3D</h3>
        <h3>$450</h3>
        <button onclick="addToCart('9800X3D', 450)">Add to Cart</button>
        <button class="spec-btn" onclick="openSpecs('AMD Ryzen 7 9800X3D Granite Ridge AM5 4.70GHz 8-Core Boxed Processor - Heatsink Not Included')">Specs</button>
      </div>

      <div class="item">
        <img src="/Images/9600x.jpg" alt="9600x">
        <h3>AMD Ryzen 5 9600X</h3>
        <h3>$180</h3>
        <button onclick="addToCart('AMD Ryzen 5 9600X', 180)">Add to Cart</button>
        <button class="spec-btn" onclick="openSpecs('AMD Ryzen 5 9600X Granite Ridge AM5 3.90GHz 6-Core Boxed Processor - Heatsink Not Included')">Specs</button>
      </div>

      <div class="item">
        <img src="/Images/inlandssd.jpg" alt="ssd2tb">
        <h3>Inland Platinum 2TB SSD</h3>
        <h3>$180</h3>
        <button onclick="addToCart('Inland Platinum 2TB SSD', 180)">Add to Cart</button>
        <button class="spec-btn" onclick="openSpecs('Inland Platinum 2TB SSD 2.5-inch SATA III')">Specs</button>
      </div>

      <div class="item">
        <img src="/Images/HPDeskstop.jpg" alt="HP">
        <h3>HP OmniDesk M02-0127c</h3>
        <h3>$550</h3>
        <button onclick="addToCart('HP OmniDesk M02-0127c Desktop Computer', 550)">Add to Cart</button>
        <button class="spec-btn" onclick="openSpecs('Intel i5 â€¢ RTX 3060 â€¢ 16GB RAM â€¢ 1TB SSD')">Specs</button>
      </div>
    </div>
  </section>

  <!-- DESKTOPS -->
  <section id="desktops">
    <h2 class="section-title">Desktops</h2>

    <div class="listing">
      <div class="item">
        <img src="/Images/acer.png" alt="Acer Nitro 60 Gaming PC">
        <h3>Acer Nitro 60 N60-640-UR11</h3>
        <h3>$900</h3>
        <button onclick="addToCart('Acer Nitro 60 Gaming PC', 900)">Add to Cart</button>
        <button class="spec-btn" onclick="openSpecs('Intel i5 â€¢ RTX 3060 â€¢ 16GB RAM â€¢ 1TB SSD')">Specs</button>
      </div>

      <div class="item">
        <img src="/Images/Asus.png" alt="ASUS TUF Gaming T500 Gaming PC">
        <h3>ASUS TUF Gaming T500</h3>
        <h3>$950</h3>
        <button onclick="addToCart('ASUS TUF Gaming T500 Gaming PC', 950)">Add to Cart</button>
        <button class="spec-btn" onclick="openSpecs('Intel i7 â€¢ RTX 3070 â€¢ 16GB RAM â€¢ 1TB SSD')">Specs</button>
      </div>

      <div class="item">
        <img src="/Images/spec.jpg" alt="PowerSpec G757 Gaming PC">
        <h3>PowerSpec G757 AMD</h3>
        <h3>$1200</h3>
        <button onclick="addToCart('PowerSpec G757 Gaming PC', 1200)">Add to Cart</button>
        <button class="spec-btn" onclick="openSpecs('Ryzen 7 â€¢ RX 6800 â€¢ 32GB RAM â€¢ 2TB SSD')">Specs</button>
      </div>

      <div class="item">
        <img src="/Images/HPDeskstop.jpg" alt="HP">
        <h3>HP OmniDesk M02-0127c</h3>
        <h3>$550</h3>
        <button onclick="addToCart('HP OmniDesk M02-0127c Desktop Computer', 550)">Add to Cart</button>
        <button class="spec-btn" onclick="openSpecs('Intel i5 â€¢ RTX 3060 â€¢ 16GB RAM â€¢ 1TB SSD')">Specs</button>
      </div>
    </div>
  </section>

  <!-- PARTS -->
  <section id="parts">
    <h2 class="section-title">Parts</h2>

    <div class="listing">
      <div class="item">
        <img src="/Images/CPUBundle3.jpg" alt="cpubundle">
        <h3>Bundles</h3>
        <button class="shop-btn" onclick="window.location.href='/cpu.html'">Shop Now</button>
      </div>

      <div class="item">
        <img src="/Images/9800.jpg" alt="cpu">
        <h3>CPUs</h3>
        <button class="shop-btn" onclick="window.location.href='/cpu.html'">Shop Now</button>
      </div>

      <div class="item">
        <img src="/Images/9070xt.jpg" alt="GPU">
        <h3>Graphic Cards</h3>
        <button class="shop-btn" onclick="window.location.href='/cpu.html'">Shop Now</button>
      </div>

      <div class="item">
        <img src="/Images/ssd.png" alt="ssd">
        <h3>SSDs</h3>
        <button class="shop-btn" onclick="window.location.href='/cpu.html'">Shop Now</button>
      </div>
    </div>
  </section>

  <!-- MINI CART -->
  <div id="mini-cart" class="mini-cart">
    <h3>Your Cart</h3>
    <div id="mini-cart-items"></div>
    <div class="mini-cart-total" id="mini-cart-total"></div>
    <button class="view-cart-btn" onclick="goToCart()">View Cart</button>
  </div>

 
  <div id="footer-placeholder"></div>

 
<div id="kumo-chat">
  <div id="chat-header" onclick="toggleChat()">
    ðŸ¤– Kumo AI Assistant
    <span id="chat-chevron">â–²</span>
  </div>

  <div id="chat-body" style="display:none;">
    <div id="chat-output"></div>

    <div class="kumo-input-row">
      <input type="text" id="user-input" placeholder="Ask about specs..." onkeypress="handleEnter(event)">
      <button class="kumo-send-btn" onclick="sendMessage()">Send</button>
    </div>
  </div>
</div>


  <script>
    // ---------- NAV MENU ----------
    function toggleMenu() {
      document.getElementById("navMenu").classList.toggle("active");
    }

    // ---------- FOOTER INCLUDE ----------
    fetch("/footer.html")
      .then(res => res.text())
      .then(html => {
        const spot = document.getElementById("footer-placeholder");
        if (spot) spot.innerHTML = html;
      })
      .catch(() => {
        console.warn("Footer failed to load. Check footer.html path/name in S3.");
      });

    // ---------- CART (localStorage) ----------
    function addToCart(name, price) {
      const cart = loadCart();
      const existing = cart.find(i => i.name === name);

      if (existing) existing.quantity++;
      else cart.push({ name, price, quantity: 1 });

      saveCart(cart);
      updateCartCount();
      renderMiniCart();
    }

    function toggleMiniCart() {
      document.getElementById("mini-cart").classList.toggle("active");
      renderMiniCart();
    }

    function goToCart() {
      window.location.href = "/cart.html";
    }

    function loadCart() {
      return JSON.parse(localStorage.getItem("cart")) || [];
    }

    function saveCart(cart) {
      localStorage.setItem("cart", JSON.stringify(cart));
    }

    function updateCartCount() {
      const cart = loadCart();
      const count = cart.reduce((sum, i) => sum + i.quantity, 0);
      const el = document.getElementById("cart-count");
      if (el) el.textContent = count;
    }

    function renderMiniCart() {
      const cart = loadCart();
      const itemsDiv = document.getElementById("mini-cart-items");
      const totalDiv = document.getElementById("mini-cart-total");

      if (!itemsDiv || !totalDiv) return;

      itemsDiv.innerHTML = "";
      let total = 0;

      if (cart.length === 0) {
        itemsDiv.innerHTML = "<p>Your cart is empty.</p>";
        totalDiv.textContent = "";
        return;
      }

      cart.forEach(item => {
        total += item.price * item.quantity;

        const div = document.createElement("div");
        div.className = "mini-cart-item";
        div.innerHTML = `<span>${item.name}</span><span>x${item.quantity}</span>`;
        itemsDiv.appendChild(div);
      });

      totalDiv.innerHTML = `<strong>Total:</strong> $${total}`;
    }

    function openSpecs(text) {
      alert(text);
    }

    // Keep cart count correct on page load
    updateCartCount();
  </script>

  <script>
    // ---------- KUMO CHAT ----------
    const API_URL = "https://mqrhmpoo5i.execute-api.us-east-1.amazonaws.com/Chat";

  function toggleChat() {
  const b = document.getElementById("chat-body");
  const chev = document.getElementById("chat-chevron");

  const isClosed = (b.style.display === "none" || b.style.display === "");
  b.style.display = isClosed ? "block" : "none";
  if (chev) chev.textContent = isClosed ? "â–¼" : "â–²";
}


    function handleEnter(e) {
      if (e.key === "Enter") sendMessage();
    }

    async function sendMessage() {
      const input = document.getElementById("user-input");
      const output = document.getElementById("chat-output");
      const text = (input.value || "").trim();
      if (!text) return;

     const userDiv = document.createElement("div");
userDiv.className = "kumo-msg kumo-user";
userDiv.textContent = text;
output.appendChild(userDiv);

      input.value = "";

      try {
   const res = await fetch(API_URL, {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({ message: text })
});

const raw = await res.text(); // read body safely first

if (!res.ok) {
  throw new Error(`HTTP ${res.status}: ${raw}`);
}

let data;
try { data = JSON.parse(raw); } catch { data = { reply: raw }; }


const botDiv = document.createElement("div");
botDiv.className = "kumo-msg kumo-bot";
botDiv.textContent = data.reply ?? "";
output.appendChild(botDiv);


        output.scrollTop = output.scrollHeight;
      } catch (e) {
        const errorDiv = document.createElement("div");
        errorDiv.style.color = "red";
        errorDiv.textContent = "Error connecting to bot.";
        output.appendChild(errorDiv);
        console.error(e);
      }
    }
  </script>

</body>
</html>
